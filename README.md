# Tonal Recognition

The aim of this program is to use the concept of Fourier Transform to take in an audio file and identify the tone quality of it. Because
I combined this project with my Math 22 final project, the following is an excerpt from our paper describing exactly what we aim to
evaluate:

It is often thought that in order to become a master performer on a particular instrument, a musician must practice for 10,000 hours.  
Whether or not this is really true, it poses the question: how do we even distinguish between a “beginner” versus an “advanced” instrumentalist?  
Sure, someone who has been playing for multiple years will be able to perform harder repertoire and execute more advanced techniques than someone who  
just started taking lessons. However, this cannot be the only indicator of skill level, since almost everyone would be able to distinguish between  
the sounds of a master and a beginning violinist if they both played “Hot Cross Buns.” So what exactly is it that makes an expert instrumentalist  
sound so much better than a novice even when playing the same piece of music? One might start thinking about the tone quality or timbre of each player,  
or how pleasant it sounds. But exactly how does timbre work physically when we analyze sound using physical sound waves? How do the sound waves differ
between a beginner and an advanced violinist? That is what we seek to discover.

In this project, we will first derive an operation to turn sound waves from a violin into numerical data (fourier transform), then use that data to see  
if we can find a trend between tone quality and the sound waves. Since it is not possible to directly quantify how “good” something  
sounds, we will use price as a proxy measurement for the tone quality of each violin. Finally, I attempt to write a function  
that can predict the price of a violin based on how it sounds.

We can start with what we know about sound waves and instruments. When a computer is tasked with generating a certain pitch,  
it is able to produce a pure sine wave that oscillates at a certain frequency corresponding to that pitch; for example, a  
concert A4 has a standard frequency of 440 Hertz, or 440 cycles per second. However, on a physical musical instrument, pitches
are generated by (usually) either strings or columns of air, which act’s as the instrument’s resonator. This resonator not  
only oscillates at the frequency of the pitch we hear, but also at several other frequencies that are integer multiples of  
the base frequency. Since different types of sounds will resonate these harmonics at different relative strengths, this is  
where our knowledge of linear algebra and linear combinations will be useful.

The lowest frequency, usually the perceived pitch, is called the fundamental, or natural frequency. The other harmonics whose  
frequencies are integer multiples of the fundamental are called overtones, and the set of all these frequencies together is known as  
the harmonic series. Physicists and musicians have determined through that the timbre of an instrument is affected by the relative  
amplitudes of each overtone with the fundamental that the instrument produces. Since different instruments are built differently and  
their strings or air columns oscillate in different ways, the strength of the overtones will vary from instrument to instrument,  
which is why, say, a piano and a flute sound different even when playing the same pitch.

What has not been studied in as much depth is the difference in relative overtone strengths from one instrument to another instrument  
of the same type, i.e. between two violins built by different manufacturers. Knowing this would allow us to do many things, such as  
improve voice recognition softwares, or be able to create more realistic, higher-quality sounding computer generated instruments  
which are notoriously unrealistic. Our goal is to see if we can mathematically describe the harmonic series of a steady tone on a
violin in order to predict the tone quality of the instrument.

Now, in order to work the program, we must make sure we are inside the "tone_recognition" folder. It is best to open this in a text
editor or IDE, like PyCharm. This way, it will be easy to see what packages you don't have installed. Some of the packages will be imported
through the "venv" folder, but others might not. Here is a list of the packages/libraries you would need to download:

1. librosa
2. PyAudio
3. numba
4. numpy
5. pickle
6. collections

Once you have all the packages downloaded, you should be able to run the program through command line. Run "python main.py" inside of
the tone_recognition folder. if "longtone.dict" doesn't exist, the program will recreate it before asking for user input  
(make sure you change the "path" variable at the beginning of the "load_tones" function to whatever the path is for your laptop to get
to the mp3 files). Otherwise, the program will ask for user input. Since the data set is only for open string long tones on violins,  
the "longtone_mp3s" folder contains the mp3s you need for testing the program. Press "enter" in the terminal when prompted, and
play one of the tones. Make sure that the volume is loud enough for the program to capture it. If the volume isn't loud enough, the program
will throw an error and will break. If so, you can simply run "python main.py" again and try again. What the program returns should
match whatever the mp3 file name was. It should identify the note and the quality. For example, if the best violin is playing A, then
the program should return "bestA".

An example of running the program is in the youtube demo linked below:

https://youtu.be/J9BHgoFD19w
